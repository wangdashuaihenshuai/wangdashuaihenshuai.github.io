(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{15:function(t,i,n){},16:function(t,i,n){},36:function(t,i,n){"use strict";n.r(i);var e=n(0),s=n.n(e),a=n(6),c=n.n(a),h=(n(15),n(16),n(10)),r=n(7),o=n(2),u=n(8),l=n(9),d=new o.GPU,f=function(){function t(i,n,e){Object(u.a)(this,t),this.N=void 0,this.width=void 0,this.hight=void 0,this.max_distance=void 0,this.circleInfos=void 0,this.calculate=void 0,this.N=i,this.width=n,this.hight=e,this.max_distance=e>n?e:n,this.circleInfos=[],this.calculate=this.newCalculate()}return Object(l.a)(t,[{key:"newCalculate",value:function(){return d.createKernel((function(t,i){var n=this.constants.TWO_PI*(this.thread.z/1+Math.random())/this.constants.N,e=Math.cos(n),s=Math.sin(n),a=this.thread.x,c=this.thread.y,h=a-t[0][0][0],r=c-t[0][0][1],o=Math.sqrt(h*h+r*r)-t[0][0][2],u=0,l=-1;if(o<this.constants.MIN_STEP_LEN)return 0;for(var d=0;d<this.constants.MAX_STEP&&u<this.constants.max_distance;d++){for(var f=a+u*e,v=c+u*s,g=0;g<i;g++){var p=f-t[g][0][0],x=v-t[g][0][1],b=Math.sqrt(p*p+x*x)-t[g][0][2];b<o&&(o=b,l=g)}if(o<this.constants.MIN_STEP_LEN)return l;u+=o}return-1}),{constants:{N:this.N,max_distance:this.max_distance,PI:Math.PI,TWO_PI:2*Math.PI,MIN_STEP_LEN:.1,MAX_STEP:50},output:[this.hight,this.width,this.N]})}},{key:"init",value:function(t,i,n){this.N=t,this.width=i,this.hight=n,this.max_distance=n>i?n:i}},{key:"setCircles",value:function(t){this.circleInfos=t}},{key:"run",value:function(){return this.calculate(this.circleInfos,this.circleInfos.length)}}]),t}(),v=n(1),g=window.innerWidth,p=window.innerHeight;var x=(new o.GPU).createKernel((function(t,i,n){for(var e=0,s=0,a=0,c=0;c<n;c++){var h=i[c][this.thread.x][this.thread.y];h>=0&&(e+=t[h][1][0],s+=t[h][1][1],a+=t[h][1][2])}this.color(e/n,s/n,a/n,1)})).setOutput([g,p]).setGraphical(!0),b=x.canvas,w=[];function y(t){w.push({x:t.x*p,y:t.y*g,r:t.r*p,light:t.light})}function j(){var t=Object(e.useState)(32),i=Object(h.a)(t,2),n=i[0],s=i[1];return console.log(s),Object(e.useEffect)((function(){var t=window.document.getElementById("GPUCircle");if(t){t.appendChild(b);var i=new f(n,g,p),e=function(t){var i,n=[],e=Object(r.a)(t);try{for(e.s();!(i=e.n()).done;){var s=i.value;n.push([[s.x,s.y,s.r],[s.light.r,s.light.g,s.light.b]])}}catch(a){e.e(a)}finally{e.f()}return n}(w);i.setCircles(e);var s=i.run();console.log(s,g,p),x(e,s,n)}}),[n]),Object(v.jsx)("div",{id:"GPUCircle"})}y({x:.5,y:.5,r:.1,light:{r:2,g:0,b:2}}),y({x:.3,y:.3,r:.1,light:{r:0,g:2,b:0}});var I=function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(j,{})})},P=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(i){var n=i.getCLS,e=i.getFID,s=i.getFCP,a=i.getLCP,c=i.getTTFB;n(t),e(t),s(t),a(t),c(t)}))};c.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(I,{})}),document.getElementById("root")),P()}},[[36,1,2]]]);
//# sourceMappingURL=main.72f49c3d.chunk.js.map